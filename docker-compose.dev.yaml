services:
  devcontainer:
    build:
      context: .
      dockerfile: dev.Dockerfile

    volumes:
      - /home/bevzd/test:/test
      - ".:/workspace:cached"
      - etc_volume:/etc

    environment:
      - POSTGRES_HOST=db

    env_file:
      - .env

    cap_add:
      - CAP_SYS_ADMIN

    privileged: true
    command: [ "sleep", "infinity" ]

  db:
    image: postgres:latest
    volumes:
      - pgdata:/var/lib/postgresql/data
    ports: [ "5432:5432" ]
    env_file:
      - .env
# web:
#     build:
#       context: web
#       dockerfile: dockerfile
volumes:
  pgdata:
  etc_volume:
